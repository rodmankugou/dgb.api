1、安装java
a、上传 /Users/liujinhua/work/package（安装包）/jdk-8u291-linux-x64.tar.gz到服务器的/root目录
        mv /home/ubuntu/jdk-8u291-linux-x64.tar.gz /home/ubuntu
b、切换到/user/local目录，并解压安装包
    cd /usr/local
    mv /home/ubuntu/jdk-8u291-linux-x64.tar.gz ./
    tar -zxvf jdk-8u291-linux-x64.tar.gz
    mkdir jdk
    mv jdk1.8.0_291 ./jdk
c、配置环境,打开/etc/profile文件，并添加内容
    a1、
        vi /etc/profile

    a2、在尾部追加以下内容
#set java env
export JAVA_HOME=/usr/local/jdk/jdk1.8.0_291
export JRE_HOME=${JAVA_HOME}/jre
export CLASSPATH=.:${JAVA_HOME}/lib:${JRE_HOME}/lib
export PATH=${JAVA_HOME}/bin:$PATH

    a3、执行命令
        source /etc/profile
    a4、执行第一条命令，并在底部添加"source /etc/profile"，使配置在新连接中生效
        sudo vi ~/.bashrc


3、安装maven
执行 mvn -v，如果提示未安装，则按照提示安装

4、安装mysql数据库，如果是购买RDS，则忽略
 a、apt-get-update
 b、apt install mysql-server mysql-client (此步执行时可以确定mysql版本，如果不是目标版本，可以停止安装)
 c、修改配置
    c1、 vi /etc/mysql/mysql.conf.d/mysqld.cnf
    c2、 将mysqld.conf中的一下配置改成以下值
        max_connections = 10240
        sql_mode = NO_ENGINE_SUBSTITUTION
 d、启动，  systemctl restart mysql
 e、登录，  mysql -uroot -p
 f、修改root密码
    f1、选中mysql数据库， use mysql;
    f2、修改root密码
        alter user 'root'@'localhost' identified with mysql_native_password by '7umisjHUl2jt8dc3ac';
        # 此处需要刷新，否则无法进行下一步修改
        flush privileges;




9、安装 reids
参考：https://redis.io/docs/getting-started/installation/install-redis-on-linux/

10、配置仓库
a、ssh-keygen -t ed25519 -C "xxxxx" -f /home/ubuntu/.ssh/gitee,如 ssh-keygen -t ed25519 -C "nsav-online"
b、cat /home/ubuntu/.ssh/id_ed25519.pub，复制公钥（整行内容）
c、到gitee中配置公钥
d、运行命令，ssh -T git@gitee.com

11、从git中拉取代码到本地
a、mkdir /home/ubuntu/projects
b、cd /home/ubuntu/projects
c、git init
d、git clone git@gitee.com:verificer/sevensea.api.git

12、安装nginx
apt-get install nginx
service nginx start

13、创建数据库
CREATE DATABASE IF NOT EXISTS sevensea DEFAULT CHARSET utf8 COLLATE utf8_general_ci;
CREATE DATABASE IF NOT EXISTS sevensea_admin DEFAULT CHARSET utf8 COLLATE utf8_general_ci;
use sevensea;
source  /home/ubuntu/yastart_test.sql;
use sevensea_admin;
source  /home/ubuntu/yastart_admin_test.sql;

14、修改用户头像
update avatar set url = REPLACE(url,'http://test.yastart.io/avatars','https://testnet.7seasnft.com/avatars');
update customer set avatar = REPLACE(avatar,'http://test.yastart.io/avatars','https://testnet.7seasnft.com/avatars');


15、用root账号，创建目录
sudo su
cd /mnt
mkdir sevensea
cd sevensea
mkdir apis
mkdir static

将/mnt/sevensea 目录转给 ubuntu账号
chown -R ubuntu /home/ubuntu/projects/
chown -R ubuntu /mnt/sevensea

16、切换账户，运行java应用
su ubuntu
cd /mnt/sevensea/apis
mv /home/ubuntu/run.sh ./

bash run.sh web admin user biz

17、部署web应用
cd /mnt/sevensea/static
    a、部署头像
    mv /home/ubuntu/avatars.zip ./
    unzip avatars.zip
    mkdir _avatar
    mv avatars ./_avatar

    b、部署web
    mv /home/ubuntu/dist.zip ./
    mv dist.zip web.zip
    unzip web.zip
    mv dist ./web

    c、部署admin
    mv /home/ubuntu/dist.zip ./
    mv dist.zip admin.zip
    unzip admin.zip
    mv dist ./admin

18、配置nginx
a、放置ssl公私钥对
sudo su  切换root用户
cd /etc/nginx
mkdir ssl
cd ssl
mv /home/ubuntu/_.7seasnft.com.zip ./
unzip _.7seasnft.com.zip

b、copy conf文件
cd /etc/nginx/conf.d
mv /home/ubuntu/*.conf ./

c、重新加载nginx配置文件
nginx -t
nginx -s reload




