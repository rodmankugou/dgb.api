0、配置新的交易合约地址
1、上线不允许拍卖的web端版本
2、 增加字段
ALTER TABLE `auction_record` ADD COLUMN `ex_contract_address` varchar(200) COMMENT '交易合约地址' AFTER `last_ex_price`, CHANGE COLUMN `tx_hash` `tx_hash` varchar(255) DEFAULT NULL COMMENT '交易hash' AFTER `ex_contract_address`, CHANGE COLUMN `chain_order_id` `chain_order_id` varchar(200) DEFAULT NULL COMMENT '链上的订单id' AFTER `tx_hash`, CHANGE COLUMN `starting_price` `starting_price` decimal(38,18) DEFAULT NULL AFTER `chain_order_id`, CHANGE COLUMN `tran_price` `tran_price` decimal(38,18) DEFAULT NULL COMMENT '成交价' AFTER `starting_price`, CHANGE COLUMN `winner_bid_id` `winner_bid_id` bigint DEFAULT NULL COMMENT '最终中标的bid_id' AFTER `tran_price`, CHANGE COLUMN `auction_start_time` `auction_start_time` bigint DEFAULT NULL COMMENT '拍卖开始时间' AFTER `winner_bid_id`, CHANGE COLUMN `auction_end_time` `auction_end_time` bigint DEFAULT NULL COMMENT '拍卖结束时间' AFTER `auction_start_time`, CHANGE COLUMN `confirm_time` `confirm_time` bigint DEFAULT NULL COMMENT '确认时间' AFTER `auction_end_time`, CHANGE COLUMN `create_time` `create_time` bigint DEFAULT NULL AFTER `confirm_time`, CHANGE COLUMN `confirm_count` `confirm_count` bigint DEFAULT NULL COMMENT '该次拍卖为平台中的第几次成功的拍卖' AFTER `create_time`;
3、确认最后一个tx的syn_satus = 4以后
    select status frm tx_sync_mission exOrder by id desc limit 3;
    确认后执行
    update auction_record set ex_contract_address = '0xB85Bf1D77540c48F27BF46D3025aF188FdF5A763';

4、增加字段
ALTER TABLE `artwork` ADD COLUMN `cur_quoted_price` decimal(38,18) COMMENT '交易行情价' AFTER `cur_pending_id`, CHANGE COLUMN `last_trade_price` `last_trade_price` decimal(38,18) DEFAULT 0.000000000000000000 COMMENT '上一次交易的价格' AFTER `cur_quoted_price`, CHANGE COLUMN `title` `title` varchar(2000) DEFAULT NULL COMMENT '标题' AFTER `last_trade_price`, CHANGE COLUMN `remark` `remark` varchar(2000) DEFAULT NULL COMMENT '描述' AFTER `title`, CHANGE COLUMN `image_url` `image_url` varchar(2000) DEFAULT NULL AFTER `remark`, CHANGE COLUMN `mini_image_url` `mini_image_url` varchar(2000) DEFAULT NULL COMMENT '缩略图url' AFTER `image_url`, CHANGE COLUMN `category` `category` varchar(200) DEFAULT NULL AFTER `mini_image_url`, CHANGE COLUMN `token_id` `token_id` varchar(255) DEFAULT NULL COMMENT 'tokenId' AFTER `category`, CHANGE COLUMN `token` `token` varchar(2000) DEFAULT NULL COMMENT '合约地址' AFTER `token_id`, CHANGE COLUMN `img_ipfs_hash` `img_ipfs_hash` varchar(2000) DEFAULT NULL AFTER `token`, CHANGE COLUMN `json_ipfs_hash` `json_ipfs_hash` varchar(2000) DEFAULT NULL AFTER `img_ipfs_hash`, CHANGE COLUMN `tx_hash` `tx_hash` varchar(2000) DEFAULT NULL AFTER `json_ipfs_hash`, CHANGE COLUMN `royalties` `royalties` decimal(38,18) DEFAULT NULL COMMENT '版税' AFTER `tx_hash`, CHANGE COLUMN `royalties_pool` `royalties_pool` decimal(38,18) DEFAULT NULL AFTER `royalties`, CHANGE COLUMN `lock_flag` `lock_flag` tinyint(1) DEFAULT NULL COMMENT '是否owner和author可见' AFTER `royalties_pool`, CHANGE COLUMN `target_address` `target_address` varchar(2000) DEFAULT NULL COMMENT '铸币成功后的发放地址' AFTER `lock_flag`, CHANGE COLUMN `contract_address` `contract_address` varchar(2000) DEFAULT NULL AFTER `target_address`, CHANGE COLUMN `create_time` `create_time` bigint DEFAULT NULL AFTER `contract_address`;


==================发布后
5、更新字段
update artwork aw set cur_quoted_price = (select br.price from auction_record ar join bid_record br on (ar.id = br.auction_record_id )  where br.status = 1 and ar.id = aw.cur_pending_id) where aw.status = 5;

4、开始测试



